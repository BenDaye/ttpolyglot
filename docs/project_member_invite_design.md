# é¡¹ç›®æˆå‘˜é‚€è¯·åŠŸèƒ½è®¾è®¡æ–‡æ¡£

## ğŸ“‹ ç›®å½•

- [åŠŸèƒ½æ¦‚è¿°](#åŠŸèƒ½æ¦‚è¿°)
- [æ•°æ®åº“è®¾è®¡](#æ•°æ®åº“è®¾è®¡)
- [åç«¯ API è®¾è®¡](#åç«¯-api-è®¾è®¡)
- [å‰ç«¯å®ç°æ–¹æ¡ˆ](#å‰ç«¯å®ç°æ–¹æ¡ˆ)
- [UI/UX è®¾è®¡](#uiux-è®¾è®¡)
- [æƒé™æ§åˆ¶](#æƒé™æ§åˆ¶)
- [æˆå‘˜ä¸Šé™ç®¡ç†](#æˆå‘˜ä¸Šé™ç®¡ç†)
- [å®ç°æ­¥éª¤](#å®ç°æ­¥éª¤)

---

## åŠŸèƒ½æ¦‚è¿°

### æ ¸å¿ƒéœ€æ±‚

é¡¹ç›®æˆå‘˜é‚€è¯·åŠŸèƒ½æ”¯æŒä¸¤ç§æ–¹å¼ï¼š

1. **é‚€è¯·é“¾æ¥/äºŒç»´ç **ï¼ˆé€‚åˆå¤–éƒ¨é‚€è¯·ï¼‰
   - ç”Ÿæˆå”¯ä¸€çš„é‚€è¯·é“¾æ¥
   - æ”¯æŒäºŒç»´ç æ‰«æåŠ å…¥
   - å¯è®¾ç½®æœ‰æ•ˆæœŸã€ä½¿ç”¨æ¬¡æ•°ã€é»˜è®¤è§’è‰²
   - ç”¨æˆ·ç‚¹å‡»é“¾æ¥åè·³è½¬åˆ°åŠ å…¥ç¡®è®¤é¡µé¢

2. **ç›´æ¥æ·»åŠ æˆå‘˜**ï¼ˆé€‚åˆå†…éƒ¨å·²çŸ¥ç”¨æˆ·ï¼‰
   - é€šè¿‡ç”¨æˆ·å/é‚®ç®±æœç´¢ç”¨æˆ·
   - é€‰æ‹©è§’è‰²åç›´æ¥æ·»åŠ 
   - æ”¯æŒæ‰¹é‡æ·»åŠ å¤šä¸ªç”¨æˆ·
   - ç«‹å³ç”Ÿæ•ˆï¼Œæ— éœ€ç”¨æˆ·ç¡®è®¤

3. **æˆå‘˜ä¸Šé™ç®¡ç†**
   - æ¯ä¸ªé¡¹ç›®æœ‰ç‹¬ç«‹çš„æˆå‘˜ä¸Šé™ï¼ˆå­˜å‚¨åœ¨ `projects.member_limit` å­—æ®µï¼‰
   - åˆ›å»ºé¡¹ç›®æ—¶é»˜è®¤ä¸Šé™ä¸º 10 äºº
   - **ä»…é¡¹ç›®æ‰€æœ‰è€…ï¼ˆOwnerï¼‰å¯ä»¥åœ¨é¡¹ç›®è®¾ç½®ä¸­ä¿®æ”¹ä¸Šé™**ï¼ˆ1-1000 äººï¼‰
   - ç®¡ç†å‘˜ï¼ˆAdminï¼‰å’Œå…¶ä»–æˆå‘˜æ— æƒä¿®æ”¹æˆå‘˜ä¸Šé™
   - ä¿®æ”¹ä¸Šé™æ—¶éœ€æ»¡è¶³ï¼šæ–°ä¸Šé™ >= å½“å‰æˆå‘˜æ•°
   - æ·»åŠ æˆå‘˜å‰è‡ªåŠ¨æ£€æŸ¥æ˜¯å¦è¶…è¿‡ä¸Šé™

---

## æ•°æ®åº“è®¾è®¡

### è®¾è®¡å†³ç­–ï¼šèåˆé‚€è¯·è¡¨åˆ°æˆå‘˜è¡¨

**è®¾è®¡æ€è·¯ï¼š**

åŸæœ¬è®¡åˆ’åˆ›å»ºç‹¬ç«‹çš„ `project_invites` è¡¨æ¥ç®¡ç†é‚€è¯·é“¾æ¥ï¼Œä½†ç»è¿‡é‡æ–°æ€è€ƒï¼Œæˆ‘ä»¬å†³å®šå°†é‚€è¯·åŠŸèƒ½ç›´æ¥èåˆåˆ° `project_members` è¡¨ä¸­ã€‚è¿™æ ·åšæœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š

**ä¼˜åŠ¿ï¼š**
1. **ç®€åŒ–æ•°æ®ç»“æ„**ï¼šå‡å°‘ä¸€å¼ è¡¨ï¼Œé™ä½æ•°æ®åº“å¤æ‚åº¦
2. **ç»Ÿä¸€ç®¡ç†**ï¼šæˆå‘˜å’Œé‚€è¯·éƒ½åœ¨åŒä¸€å¼ è¡¨ï¼Œä¾¿äºæŸ¥è¯¢å’Œç®¡ç†
3. **åŸå­æ€§æ›´å¥½**ï¼šæ¥å—é‚€è¯·æ—¶ï¼Œåªéœ€æ›´æ–°ä¸€æ¡è®°å½•ï¼Œè€Œéåˆ é™¤é‚€è¯·è®°å½•+åˆ›å»ºæˆå‘˜è®°å½•
4. **å‡å°‘å†—ä½™**ï¼šé¿å… project_idã€invited_byã€role ç­‰å­—æ®µé‡å¤å­˜å‚¨

**å®ç°æ–¹å¼ï¼š**

`project_members` è¡¨é€šè¿‡ `user_id` å’Œ `invite_code` å­—æ®µåŒºåˆ†ä¸¤ç§è®°å½•ç±»å‹ï¼š

1. **æˆå‘˜è®°å½•**ï¼š`user_id` æœ‰å€¼ï¼Œ`invite_code` ä¸º NULL
   - è¡¨ç¤ºå·²åŠ å…¥é¡¹ç›®çš„æˆå‘˜
   
2. **é‚€è¯·é“¾æ¥è®°å½•**ï¼š`user_id` ä¸º NULLï¼Œ`invite_code` æœ‰å€¼
   - è¡¨ç¤ºå¾…ä½¿ç”¨çš„é‚€è¯·é“¾æ¥
   - å½“ç”¨æˆ·é€šè¿‡é‚€è¯·é“¾æ¥åŠ å…¥æ—¶ï¼Œä¼šåˆ›å»ºæ–°çš„æˆå‘˜è®°å½•ï¼Œå¹¶å¢åŠ è¯¥é‚€è¯·è®°å½•çš„ `used_count`

**æ•°æ®çº¦æŸï¼š**

é€šè¿‡ `CHECK` çº¦æŸç¡®ä¿æ¯æ¡è®°å½•åªèƒ½æ˜¯å…¶ä¸­ä¸€ç§ç±»å‹ï¼š
```sql
CHECK (
  (user_id IS NOT NULL AND invite_code IS NULL) OR 
  (user_id IS NULL AND invite_code IS NOT NULL)
)
```

---

### 1. ä¿®æ”¹ `projects` è¡¨

åœ¨ `006_projects_table.dart` ä¸­æ·»åŠ  `member_limit` å­—æ®µï¼š

```sql
ALTER TABLE projects 
ADD COLUMN member_limit INTEGER DEFAULT 10 NOT NULL;

-- æ·»åŠ çº¦æŸï¼šæˆå‘˜ä¸Šé™å¿…é¡»å¤§äº 0 ä¸”ä¸è¶…è¿‡ 1000
ALTER TABLE projects 
ADD CONSTRAINT projects_member_limit_check 
CHECK (member_limit > 0 AND member_limit <= 1000);
```

**å­—æ®µè¯´æ˜ï¼š**
- `member_limit`: é¡¹ç›®æˆå‘˜ä¸Šé™ï¼Œåˆ›å»ºæ—¶é»˜è®¤ 10 äºº
- çº¦æŸç¡®ä¿ä¸Šé™åœ¨åˆç†èŒƒå›´å†…ï¼ˆ1-1000ï¼‰
- Owner å¯ä»¥åœ¨é¡¹ç›®è®¾ç½®é¡µé¢ä¸­ä¿®æ”¹æ­¤å€¼
- ä¿®æ”¹æ—¶éœ€è¦éªŒè¯ï¼šæ–°ä¸Šé™ >= å½“å‰æˆå‘˜æ•°

### 2. æ‰©å±• `project_members` è¡¨ï¼ˆèåˆé‚€è¯·åŠŸèƒ½ï¼‰

åœ¨å·²æœ‰çš„ `Migration018ProjectMembersTable` ä¸­æ‰©å±•å­—æ®µï¼Œä½¿å…¶åŒæ—¶æ”¯æŒï¼š
1. **å·²åŠ å…¥æˆå‘˜è®°å½•**ï¼šæœ‰ user_idï¼Œè¡¨ç¤ºå·²åŠ å…¥çš„æˆå‘˜
2. **é‚€è¯·é“¾æ¥è®°å½•**ï¼šuser_id ä¸º NULLï¼Œæœ‰ invite_codeï¼Œè¡¨ç¤ºå¾…ä½¿ç”¨çš„é‚€è¯·é“¾æ¥

**æ‰©å±•å­—æ®µï¼š**

```sql
-- åœ¨ project_members è¡¨ä¸­æ·»åŠ é‚€è¯·ç›¸å…³å­—æ®µ
ALTER TABLE project_members 
  ALTER COLUMN user_id DROP NOT NULL,  -- æ”¹ä¸ºå¯ä¸º NULLï¼Œé‚€è¯·é“¾æ¥è®°å½•ä¸éœ€è¦ user_id
  ADD COLUMN invite_code UUID UNIQUE,  -- é‚€è¯·ç ï¼Œä»…é‚€è¯·é“¾æ¥è®°å½•æœ‰å€¼
  ADD COLUMN expires_at TIMESTAMPTZ,   -- è¿‡æœŸæ—¶é—´ï¼ˆNULL è¡¨ç¤ºæ°¸ä¹…æœ‰æ•ˆï¼‰
  ADD COLUMN max_uses INTEGER,         -- æœ€å¤§ä½¿ç”¨æ¬¡æ•°ï¼ˆNULL è¡¨ç¤ºæ— é™æ¬¡ï¼‰
  ADD COLUMN used_count INTEGER DEFAULT 0;  -- å·²ä½¿ç”¨æ¬¡æ•°

-- æ·»åŠ ç´¢å¼•
CREATE INDEX idx_project_members_invite_code ON project_members(invite_code);
CREATE INDEX idx_project_members_expires_at ON project_members(expires_at);

-- æ·»åŠ çº¦æŸï¼šç¡®ä¿è®°å½•ç±»å‹çš„ä¸€è‡´æ€§
-- è¦ä¹ˆæ˜¯æˆå‘˜è®°å½•ï¼ˆæœ‰ user_idï¼‰ï¼Œè¦ä¹ˆæ˜¯é‚€è¯·é“¾æ¥è®°å½•ï¼ˆæœ‰ invite_codeï¼‰
ALTER TABLE project_members 
ADD CONSTRAINT project_members_type_check 
CHECK (
  (user_id IS NOT NULL AND invite_code IS NULL) OR 
  (user_id IS NULL AND invite_code IS NOT NULL)
);
```

**å­—æ®µè¯´æ˜ï¼š**

**å·²æœ‰å­—æ®µï¼ˆè°ƒæ•´ï¼‰ï¼š**
- `user_id`: ç”¨æˆ·IDï¼Œ**æ”¹ä¸ºå¯ä¸º NULL**ã€‚å·²åŠ å…¥æˆå‘˜æœ‰å€¼ï¼Œé‚€è¯·é“¾æ¥è®°å½•ä¸º NULL
- `status`: çŠ¶æ€ï¼Œæ‰©å±•æ”¯æŒæ›´å¤šå€¼ï¼š
  - æˆå‘˜è®°å½•ï¼š`pending`ï¼ˆå¾…ç¡®è®¤ï¼‰ã€`active`ï¼ˆæ´»è·ƒï¼‰ã€`inactive`ï¼ˆåœç”¨ï¼‰
  - é‚€è¯·é“¾æ¥ï¼š`active`ï¼ˆæœ‰æ•ˆï¼‰ã€`expired`ï¼ˆè¿‡æœŸï¼‰ã€`revoked`ï¼ˆå·²æ’¤é”€ï¼‰

**æ–°å¢å­—æ®µï¼š**
- `invite_code`: UUID æ ¼å¼çš„å”¯ä¸€é‚€è¯·ç ï¼Œä»…é‚€è¯·é“¾æ¥è®°å½•æœ‰å€¼
- `expires_at`: è¿‡æœŸæ—¶é—´ï¼ˆNULL è¡¨ç¤ºæ°¸ä¹…æœ‰æ•ˆï¼‰
- `max_uses`: æœ€å¤§ä½¿ç”¨æ¬¡æ•°ï¼ˆNULL è¡¨ç¤ºæ— é™æ¬¡ï¼‰
- `used_count`: å·²ä½¿ç”¨æ¬¡æ•°

**æ•°æ®çº¦æŸï¼š**
- é€šè¿‡ CHECK çº¦æŸç¡®ä¿æ¯æ¡è®°å½•è¦ä¹ˆæ˜¯æˆå‘˜è®°å½•ï¼ˆæœ‰ user_idï¼‰ï¼Œè¦ä¹ˆæ˜¯é‚€è¯·é“¾æ¥è®°å½•ï¼ˆæœ‰ invite_codeï¼‰
- `invite_code` å­—æ®µè®¾ç½® UNIQUE çº¦æŸï¼Œç¡®ä¿é‚€è¯·ç å”¯ä¸€

### 3. åˆ›å»º `project_member_invite_logs` è¡¨ï¼ˆå¯é€‰ï¼‰

è®°å½•é‚€è¯·é“¾æ¥çš„ä½¿ç”¨å†å²ï¼š

```sql
CREATE TABLE project_member_invite_logs (
  id SERIAL PRIMARY KEY,
  member_id INTEGER NOT NULL,  -- å…³è” project_members è¡¨ä¸­çš„é‚€è¯·é“¾æ¥è®°å½•
  user_id UUID NOT NULL,       -- ä½¿ç”¨é‚€è¯·çš„ç”¨æˆ·
  accepted BOOLEAN DEFAULT false,
  accepted_at TIMESTAMPTZ,
  ip_address VARCHAR(45),
  user_agent TEXT,
  created_at TIMESTAMPTZ DEFAULT CURRENT_TIMESTAMP,
  
  FOREIGN KEY (member_id) REFERENCES project_members(id) ON DELETE CASCADE,
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);
```

---

## åç«¯ API è®¾è®¡

### 1. é‚€è¯·é“¾æ¥ç›¸å…³ API

#### 1.1 ç”Ÿæˆé‚€è¯·é“¾æ¥

```
POST /api/projects/{projectId}/invites
```

**è¯·æ±‚ä½“ï¼š**
```json
{
  "role": "member",           // è§’è‰²ï¼šowner/admin/member/viewer
  "expiresIn": 7,            // æœ‰æ•ˆæœŸï¼ˆå¤©ï¼‰ï¼Œnull=æ°¸ä¹…
  "maxUses": null            // æœ€å¤§ä½¿ç”¨æ¬¡æ•°ï¼Œnull=æ— é™
}
```

**å“åº”ï¼š**
```json
{
  "success": true,
  "data": {
    "id": 123,
    "inviteCode": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
    "inviteUrl": "https://app.ttpolyglot.com/join/a1b2c3d4-e5f6-7890-abcd-ef1234567890",
    "qrCodeUrl": "https://api.ttpolyglot.com/qr/a1b2c3d4...",
    "role": "member",
    "expiresAt": "2025-11-04T12:00:00Z",
    "maxUses": null,
    "usedCount": 0
  }
}
```

**æƒé™ï¼š** Owner, Admin

**ä¸šåŠ¡é€»è¾‘ï¼š**
1. æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æœ‰é‚€è¯·æƒé™ï¼ˆOwner/Adminï¼‰
2. æ£€æŸ¥é¡¹ç›®å½“å‰æˆå‘˜æ•°æ˜¯å¦å·²è¾¾ä¸Šé™
3. ç”Ÿæˆå”¯ä¸€çš„ UUID ä½œä¸ºé‚€è¯·ç 
4. ä¿å­˜åˆ°æ•°æ®åº“
5. è¿”å›é‚€è¯·é“¾æ¥å’ŒäºŒç»´ç 

#### 1.2 è·å–é‚€è¯·ä¿¡æ¯

```
GET /api/invites/{inviteCode}
```

**å“åº”ï¼š**
```json
{
  "success": true,
  "data": {
    "inviteCode": "a1b2c3d4-...",
    "project": {
      "id": 1,
      "name": "æˆ‘çš„ç¿»è¯‘é¡¹ç›®",
      "description": "é¡¹ç›®æè¿°",
      "currentMemberCount": 8,
      "memberLimit": 10
    },
    "inviter": {
      "id": "user-uuid",
      "username": "zhangsan",
      "displayName": "å¼ ä¸‰"
    },
    "role": "member",
    "expiresAt": "2025-11-04T12:00:00Z",
    "isExpired": false,
    "isAvailable": true,
    "remainingUses": null
  }
}
```

**æƒé™ï¼š** å…¬å¼€ï¼ˆæ— éœ€ç™»å½•ï¼‰

**ä¸šåŠ¡é€»è¾‘ï¼š**
1. æ ¹æ®é‚€è¯·ç æŸ¥è¯¢é‚€è¯·ä¿¡æ¯
2. æ£€æŸ¥é‚€è¯·æ˜¯å¦è¿‡æœŸ
3. æ£€æŸ¥é‚€è¯·æ˜¯å¦å·²è¾¾ä½¿ç”¨æ¬¡æ•°ä¸Šé™
4. æ£€æŸ¥é¡¹ç›®æ˜¯å¦å·²è¾¾æˆå‘˜ä¸Šé™
5. è¿”å›é¡¹ç›®å’Œé‚€è¯·è€…ä¿¡æ¯

#### 1.3 æ¥å—é‚€è¯·

```
POST /api/invites/{inviteCode}/accept
```

**è¯·æ±‚å¤´ï¼š**
```
Authorization: Bearer {token}
```

**å“åº”ï¼š**
```json
{
  "success": true,
  "message": "æˆåŠŸåŠ å…¥é¡¹ç›®",
  "data": {
    "projectId": 1,
    "role": "member"
  }
}
```

**æƒé™ï¼š** éœ€è¦ç™»å½•

**ä¸šåŠ¡é€»è¾‘ï¼š**
1. éªŒè¯ç”¨æˆ·å·²ç™»å½•
2. éªŒè¯é‚€è¯·ç æœ‰æ•ˆæ€§ï¼ˆæœªè¿‡æœŸã€æœªè¾¾ä½¿ç”¨ä¸Šé™ï¼‰
3. æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²æ˜¯é¡¹ç›®æˆå‘˜
4. æ£€æŸ¥é¡¹ç›®æ˜¯å¦å·²è¾¾æˆå‘˜ä¸Šé™
5. å°†ç”¨æˆ·æ·»åŠ ä¸ºé¡¹ç›®æˆå‘˜
6. å¢åŠ é‚€è¯·ä½¿ç”¨æ¬¡æ•°
7. è®°å½•é‚€è¯·æ—¥å¿—
8. è¿”å›æˆåŠŸæ¶ˆæ¯

#### 1.4 è·å–é¡¹ç›®çš„æ‰€æœ‰é‚€è¯·é“¾æ¥

```
GET /api/projects/{projectId}/invites
```

**å“åº”ï¼š**
```json
{
  "success": true,
  "data": [
    {
      "id": 123,
      "inviteCode": "a1b2c3d4-...",
      "role": "member",
      "expiresAt": "2025-11-04T12:00:00Z",
      "maxUses": 10,
      "usedCount": 3,
      "status": "active",
      "createdBy": "å¼ ä¸‰",
      "createdAt": "2025-10-28T12:00:00Z"
    }
  ]
}
```

**æƒé™ï¼š** Owner, Admin

#### 1.5 åˆ é™¤/æ’¤é”€é‚€è¯·é“¾æ¥

```
DELETE /api/projects/{projectId}/invites/{inviteId}
```

**æƒé™ï¼š** Owner, Admin

**ä¸šåŠ¡é€»è¾‘ï¼š**
1. å°†é‚€è¯·çŠ¶æ€è®¾ç½®ä¸º `revoked`
2. è¯¥é‚€è¯·é“¾æ¥ç«‹å³å¤±æ•ˆ

### 2. ç”¨æˆ·æœç´¢ API

#### 2.1 æœç´¢ç”¨æˆ·

```
GET /api/users/search?q={keyword}
```

**æŸ¥è¯¢å‚æ•°ï¼š**
- `q`: æœç´¢å…³é”®è¯ï¼ˆç”¨æˆ·åã€é‚®ç®±ã€æ˜¾ç¤ºåï¼‰
- `limit`: è¿”å›ç»“æœæ•°é‡ï¼Œé»˜è®¤ 10

**å“åº”ï¼š**
```json
{
  "success": true,
  "data": [
    {
      "id": "user-uuid",
      "username": "zhangsan",
      "displayName": "å¼ ä¸‰",
      "email": "zhangsan@example.com",
      "avatarUrl": "https://..."
    }
  ]
}
```

**æƒé™ï¼š** éœ€è¦ç™»å½•

**ä¸šåŠ¡é€»è¾‘ï¼š**
1. åœ¨ç”¨æˆ·è¡¨ä¸­æœç´¢åŒ¹é…çš„ç”¨æˆ·
2. æ”¯æŒæ¨¡ç³Šæœç´¢ï¼ˆILIKEï¼‰
3. æ’é™¤å½“å‰ç”¨æˆ·è‡ªå·±
4. è¿”å›åŒ¹é…çš„ç”¨æˆ·åˆ—è¡¨

### 3. æˆå‘˜ç®¡ç† API

#### 3.1 ç›´æ¥æ·»åŠ æˆå‘˜

```
POST /api/projects/{projectId}/members
```

**è¯·æ±‚ä½“ï¼š**
```json
{
  "userId": "user-uuid",
  "role": "member"
}
```

**æƒé™ï¼š** Owner, Admin

**ä¸šåŠ¡é€»è¾‘ï¼š**
1. æ£€æŸ¥æƒé™
2. **æ£€æŸ¥é¡¹ç›®æˆå‘˜ä¸Šé™**
3. æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²æ˜¯æˆå‘˜
4. æ·»åŠ ç”¨æˆ·ä¸ºé¡¹ç›®æˆå‘˜
5. æ›´æ–° `projects.members_count`

#### 3.2 æ›´æ–°æˆå‘˜è§’è‰²

```
PATCH /api/projects/{projectId}/members/{userId}
```

**è¯·æ±‚ä½“ï¼š**
```json
{
  "role": "admin"
}
```

**æƒé™ï¼š** 
- Owner å¯ä»¥ä¿®æ”¹ä»»ä½•äºº
- Admin åªèƒ½ä¿®æ”¹ Member/Viewer

#### 3.3 ç§»é™¤æˆå‘˜

```
DELETE /api/projects/{projectId}/members/{userId}
```

**æƒé™ï¼š** 
- Owner å¯ä»¥ç§»é™¤ä»»ä½•äººï¼ˆé™¤äº†è‡ªå·±ï¼‰
- Admin åªèƒ½ç§»é™¤ Member/Viewer

**ä¸šåŠ¡é€»è¾‘ï¼š**
1. æ›´æ–° `project_members.is_active = false`
2. æ›´æ–° `projects.members_count`

#### 3.4 æ›´æ–°é¡¹ç›®æˆå‘˜ä¸Šé™

```
PATCH /api/projects/{projectId}/member-limit
```

**è¯·æ±‚ä½“ï¼š**
```json
{
  "memberLimit": 20
}
```

**å“åº”ï¼š**
```json
{
  "success": true,
  "message": "æˆå‘˜ä¸Šé™å·²æ›´æ–°",
  "data": {
    "projectId": 1,
    "memberLimit": 20,
    "currentMemberCount": 8
  }
}
```

**æƒé™ï¼š** ä»… Ownerï¼ˆé¡¹ç›®æ‰€æœ‰è€…ï¼‰

**ä¸šåŠ¡é€»è¾‘ï¼š**
1. **ä¸¥æ ¼éªŒè¯ç”¨æˆ·æ˜¯é¡¹ç›® Owner**ï¼ˆä¸æ˜¯ Adminï¼‰
2. éªŒè¯æ–°ä¸Šé™ >= å½“å‰æˆå‘˜æ•°ï¼ˆä¸èƒ½å°äºç°æœ‰æˆå‘˜æ•°ï¼‰
3. éªŒè¯æ–°ä¸Šé™åœ¨åˆç†èŒƒå›´å†…ï¼ˆ1 <= newLimit <= 1000ï¼‰
4. æ›´æ–° `projects.member_limit`
5. è¿”å›æ›´æ–°åçš„é¡¹ç›®ä¿¡æ¯

**æƒé™æ£€æŸ¥ï¼š**
```sql
-- éªŒè¯ç”¨æˆ·æ˜¯å¦ä¸ºé¡¹ç›® Owner
SELECT COUNT(*) FROM projects 
WHERE id = @project_id 
  AND owner_id = @user_id;
```

**é”™è¯¯å¤„ç†ï¼š**
- å¦‚æœç”¨æˆ·ä¸æ˜¯ Ownerï¼šè¿”å› 403 é”™è¯¯ï¼Œæç¤º"åªæœ‰é¡¹ç›®æ‰€æœ‰è€…å¯ä»¥ä¿®æ”¹æˆå‘˜ä¸Šé™"
- å¦‚æœæ–°ä¸Šé™ < å½“å‰æˆå‘˜æ•°ï¼šè¿”å› 400 é”™è¯¯ï¼Œæç¤º"æ–°ä¸Šé™ä¸èƒ½å°äºå½“å‰æˆå‘˜æ•°(X)"
- å¦‚æœæ–°ä¸Šé™ > 1000ï¼šè¿”å› 400 é”™è¯¯ï¼Œæç¤º"æˆå‘˜ä¸Šé™ä¸èƒ½è¶…è¿‡ 1000"
- å¦‚æœæ–°ä¸Šé™ < 1ï¼šè¿”å› 400 é”™è¯¯ï¼Œæç¤º"æˆå‘˜ä¸Šé™è‡³å°‘ä¸º 1"

---

## å‰ç«¯å®ç°æ–¹æ¡ˆ

### 1. æ•°æ®æ¨¡å‹

#### Project æ¨¡å‹æ‰©å±•

```dart
class Project {
  final String id;
  final String name;
  final String description;
  final int memberLimit;        // æ–°å¢
  final int membersCount;       // å·²æœ‰
  
  // Getter
  int get currentMemberCount => membersCount;
  bool get isMemberLimitReached => membersCount >= memberLimit;
  int get remainingSlots => memberLimit - membersCount;
}
```

#### ProjectInvite æ¨¡å‹

```dart
class ProjectInvite {
  final int id;
  final String inviteCode;
  final String inviteUrl;
  final int projectId;
  final String invitedBy;
  final ProjectRoleEnum role;
  final DateTime? expiresAt;
  final int? maxUses;
  final int usedCount;
  final InviteStatus status;
  final DateTime createdAt;
  
  bool get isExpired => 
    expiresAt != null && DateTime.now().isAfter(expiresAt!);
  
  bool get isUsesExhausted => 
    maxUses != null && usedCount >= maxUses!;
  
  bool get isAvailable => 
    status == InviteStatus.active && 
    !isExpired && 
    !isUsesExhausted;
}

enum InviteStatus { active, expired, revoked }
```

### 2. API å®¢æˆ·ç«¯

#### ProjectApi æ‰©å±•

```dart
class ProjectApi {
  // é‚€è¯·é“¾æ¥
  Future<ProjectInvite> generateInviteLink({
    required int projectId,
    required ProjectRoleEnum role,
    int? expiresInDays,
    int? maxUses,
  });
  
  Future<List<ProjectInvite>> getProjectInvites(int projectId);
  
  Future<void> revokeInvite(int projectId, int inviteId);
  
  Future<InviteInfo> getInviteInfo(String inviteCode);
  
  Future<void> acceptInvite(String inviteCode);
  
  // ç”¨æˆ·æœç´¢
  Future<List<UserSearchResult>> searchUsers(String query, {int limit = 10});
  
  // æˆå‘˜ç®¡ç†
  Future<void> addProjectMember({
    required int projectId,
    required String userId,
    required ProjectRoleEnum role,
  });
  
  Future<void> updateMemberRole({
    required int projectId,
    required String userId,
    required ProjectRoleEnum role,
  });
  
  Future<void> removeMember(int projectId, String userId);
  
  // æˆå‘˜ä¸Šé™
  Future<void> updateMemberLimit({
    required int projectId,
    required int newLimit,
  });
  
  // éªŒè¯æˆå‘˜ä¸Šé™ï¼ˆå¯é€‰ï¼Œå‰ç«¯éªŒè¯ç”¨ï¼‰
  bool validateMemberLimit({
    required int newLimit,
    required int currentMemberCount,
  }) {
    return newLimit >= currentMemberCount && 
           newLimit >= 1 && 
           newLimit <= 1000;
  }
}
```

### 3. æ§åˆ¶å™¨

#### ProjectMemberInviteController

```dart
class ProjectMemberInviteController extends GetxController {
  final String projectId;
  
  // Tab æ§åˆ¶
  final _currentTab = 0.obs;  // 0: é‚€è¯·é“¾æ¥, 1: ç›´æ¥æ·»åŠ 
  
  // é‚€è¯·é“¾æ¥ç›¸å…³
  final _selectedRole = ProjectRoleEnum.member.obs;
  final _expiresIn = Rxn<int>(7);  // 7å¤©
  final _maxUses = Rxn<int>();     // æ— é™
  final _generatedInvite = Rxn<ProjectInvite>();
  final _inviteList = <ProjectInvite>[].obs;
  
  // ç›´æ¥æ·»åŠ ç›¸å…³
  final _searchQuery = ''.obs;
  final _searchResults = <UserSearchResult>[].obs;
  final _selectedUsers = <UserSearchResult>[].obs;
  final _isSearching = false.obs;
  
  // æˆå‘˜ä¸Šé™
  int get currentMemberCount => project?.membersCount ?? 0;
  int get memberLimit => project?.memberLimit ?? 10;
  bool get canInvite => currentMemberCount < memberLimit;
  int get remainingSlots => memberLimit - currentMemberCount;
  
  // ç”Ÿæˆé‚€è¯·é“¾æ¥
  Future<void> generateInviteLink();
  
  // å¤åˆ¶é“¾æ¥
  void copyInviteLink(String url);
  
  // æœç´¢ç”¨æˆ·
  Future<void> searchUsers(String query);
  
  // é€‰æ‹©/å–æ¶ˆé€‰æ‹©ç”¨æˆ·
  void toggleUserSelection(UserSearchResult user);
  
  // æ‰¹é‡æ·»åŠ æˆå‘˜
  Future<void> addSelectedMembers();
  
  // æ£€æŸ¥æ˜¯å¦å¯ä»¥æ·»åŠ æ›´å¤šæˆå‘˜
  bool canAddMembers(int count) => 
    currentMemberCount + count <= memberLimit;
}
```

---

## UI/UX è®¾è®¡

### 1. æˆå‘˜åˆ—è¡¨é¡µé¢ï¼ˆproject_members_view.dartï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘¥ æˆå‘˜ç®¡ç†                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ“Š é¡¹ç›®æˆå‘˜ (8/10)              [é‚€è¯·æˆå‘˜] æŒ‰é’®    â”‚ â”‚
â”‚  â”‚ â–“â–“â–“â–“â–“â–“â–“â–“â–‘â–‘ 80%                                    â”‚ â”‚
â”‚  â”‚ ğŸ’¡ è¿˜å¯ä»¥é‚€è¯· 2 äºº                                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                          â”‚
â”‚  æˆå‘˜åˆ—è¡¨ï¼š                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ‘¤ å¼ ä¸‰ (zhangsan@example.com)      [æ‰€æœ‰è€…]  â‹®   â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ ğŸ‘¤ æå›› (lisi@example.com)          [ç®¡ç†å‘˜]  â‹®   â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ ğŸ‘¤ ç‹äº” (wangwu@example.com)        [æˆå‘˜]    â‹®   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

--- è¾¾åˆ°ä¸Šé™æ—¶ ---

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš ï¸ é¡¹ç›®æˆå‘˜å·²è¾¾ä¸Šé™ (10/10)       [é‚€è¯·æˆå‘˜] ç¦ç”¨      â”‚
â”‚  â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ 100%                                        â”‚
â”‚  ğŸ’¡ è¯·å…ˆç§»é™¤éƒ¨åˆ†æˆå‘˜ï¼Œæˆ–åœ¨è®¾ç½®ä¸­æå‡æˆå‘˜ä¸Šé™              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. é‚€è¯·æˆå‘˜å¯¹è¯æ¡†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é‚€è¯·æˆå‘˜åˆ°é¡¹ç›®                                     âœ•   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š å½“å‰æˆå‘˜: 8/10  |  ğŸ’¡ è¿˜å¯ä»¥é‚€è¯· 2 äºº              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [é‚€è¯·é“¾æ¥]  [ç›´æ¥æ·»åŠ ]                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  Tab 1: é‚€è¯·é“¾æ¥                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ è§’è‰²æƒé™      [Member      â–¼]                    â”‚ â”‚
â”‚  â”‚                                                   â”‚ â”‚
â”‚  â”‚ æœ‰æ•ˆæœŸ        [7å¤©          â–¼]                   â”‚ â”‚
â”‚  â”‚               â—‹ 7å¤©  â—‹ 30å¤©  â—‹ æ°¸ä¹…               â”‚ â”‚
â”‚  â”‚                                                   â”‚ â”‚
â”‚  â”‚ ä½¿ç”¨æ¬¡æ•°      [æ— é™åˆ¶        â–¼]                  â”‚ â”‚
â”‚  â”‚               â—‹ 1æ¬¡  â—‹ 10æ¬¡  â—‹ æ— é™               â”‚ â”‚
â”‚  â”‚                                                   â”‚ â”‚
â”‚  â”‚ [ç”Ÿæˆé‚€è¯·é“¾æ¥]                                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â”‚  ç”Ÿæˆçš„é“¾æ¥ï¼š                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ”— https://app.ttpolyglot.com/join/a1b2c3...     â”‚ â”‚
â”‚  â”‚                                                   â”‚ â”‚
â”‚  â”‚ [å¤åˆ¶é“¾æ¥]  [æŸ¥çœ‹äºŒç»´ç ]                         â”‚ â”‚
â”‚  â”‚                                                   â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚ â”‚
â”‚  â”‚ â”‚                 â”‚  â† äºŒç»´ç                      â”‚ â”‚
â”‚  â”‚ â”‚    QR CODE      â”‚                              â”‚ â”‚
â”‚  â”‚ â”‚                 â”‚                              â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚ â”‚
â”‚  â”‚                                                   â”‚ â”‚
â”‚  â”‚ ğŸ’¡ æœ‰æ•ˆæœŸè‡³: 2025-11-04                           â”‚ â”‚
â”‚  â”‚ ğŸ“Š å·²ä½¿ç”¨: 0 / æ— é™æ¬¡                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â”‚  ---                                                    â”‚
â”‚                                                         â”‚
â”‚  Tab 2: ç›´æ¥æ·»åŠ                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ” æœç´¢ç”¨æˆ·ï¼ˆç”¨æˆ·åã€é‚®ç®±ï¼‰                       â”‚ â”‚
â”‚  â”‚ [_________________]                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â”‚  æœç´¢ç»“æœï¼š                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â˜ ğŸ‘¤ èµµå…­ (zhaoliu@example.com)                  â”‚ â”‚
â”‚  â”‚ â˜‘ ğŸ‘¤ å­™ä¸ƒ (sunqi@example.com)                    â”‚ â”‚
â”‚  â”‚ â˜ ğŸ‘¤ å‘¨å…« (zhouba@example.com)                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â”‚  å·²é€‰æ‹© 1 äºº                                            â”‚
â”‚  è§’è‰²æƒé™  [Member      â–¼]                             â”‚
â”‚                                                         â”‚
â”‚  [æ·»åŠ é€‰ä¸­ç”¨æˆ·]                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. åŠ å…¥é¡¹ç›®é¡µé¢ (/join/:inviteCode)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      TTPolyglot                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚               ä½ æ”¶åˆ°äº†ä¸€ä¸ªé¡¹ç›®é‚€è¯·                        â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                   â”‚ â”‚
â”‚  â”‚  ğŸ“¦ æˆ‘çš„ç¿»è¯‘é¡¹ç›®                                  â”‚ â”‚
â”‚  â”‚  è¿™æ˜¯ä¸€ä¸ªå¤šè¯­è¨€ç¿»è¯‘ç®¡ç†é¡¹ç›®                        â”‚ â”‚
â”‚  â”‚                                                   â”‚ â”‚
â”‚  â”‚  ğŸ‘¤ é‚€è¯·äººï¼šå¼ ä¸‰ (zhangsan)                       â”‚ â”‚
â”‚  â”‚  ğŸ­ ä½ çš„è§’è‰²ï¼šæˆå‘˜                                â”‚ â”‚
â”‚  â”‚  ğŸ‘¥ å½“å‰æˆå‘˜ï¼š8 / 10                              â”‚ â”‚
â”‚  â”‚  â° é‚€è¯·æœ‰æ•ˆæœŸè‡³ï¼š2025-11-04                       â”‚ â”‚
â”‚  â”‚                                                   â”‚ â”‚
â”‚  â”‚  ä½œä¸ºæˆå‘˜ï¼Œä½ å¯ä»¥ï¼š                                â”‚ â”‚
â”‚  â”‚  âœ“ ç¿»è¯‘è¯æ¡                                       â”‚ â”‚
â”‚  â”‚  âœ“ æäº¤ç¿»è¯‘                                       â”‚ â”‚
â”‚  â”‚  âœ“ æŸ¥çœ‹é¡¹ç›®è¿›åº¦                                   â”‚ â”‚
â”‚  â”‚                                                   â”‚ â”‚
â”‚  â”‚  [æ¥å—é‚€è¯·]  [æ‹’ç»]                               â”‚ â”‚
â”‚  â”‚                                                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

--- é”™è¯¯çŠ¶æ€ ---

â˜¹ï¸ é‚€è¯·é“¾æ¥å·²è¿‡æœŸ
è¯¥é‚€è¯·é“¾æ¥å·²äº 2025-10-20 è¿‡æœŸ

---

âš ï¸ é¡¹ç›®æˆå‘˜å·²æ»¡
è¯¥é¡¹ç›®æˆå‘˜å·²è¾¾ä¸Šé™ (10/10)ï¼Œæš‚æ—¶æ— æ³•åŠ å…¥

---

ğŸš« é‚€è¯·é“¾æ¥æ— æ•ˆ
è¯¥é‚€è¯·é“¾æ¥ä¸å­˜åœ¨æˆ–å·²è¢«æ’¤é”€
```

### 4. é¡¹ç›®è®¾ç½® - æˆå‘˜ä¸Šé™é…ç½®

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é¡¹ç›®è®¾ç½®                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  åŸºæœ¬ä¿¡æ¯                                               â”‚
â”‚  è¯­è¨€è®¾ç½®                                               â”‚
â”‚  â¤ æˆå‘˜ç®¡ç†                                             â”‚
â”‚    â”œ æˆå‘˜åˆ—è¡¨                                           â”‚
â”‚    â”” æˆå‘˜ä¸Šé™è®¾ç½®                                       â”‚
â”‚                                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                         â”‚
â”‚  ğŸ‘¥ æˆå‘˜ä¸Šé™è®¾ç½®                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                   â”‚ â”‚
â”‚  â”‚ å½“å‰è®¾ç½®                                          â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚ â”‚ æˆå‘˜ä¸Šé™      [10        ] äºº  [ä¿®æ”¹]      â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ å½“å‰æˆå‘˜       8 äºº                         â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ å¯ç”¨åé¢       2 ä¸ª                         â”‚ â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                   â”‚ â”‚
â”‚  â”‚ ä¿®æ”¹æˆå‘˜ä¸Šé™                                      â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚ â”‚ æ–°çš„ä¸Šé™      [_________] äºº                â”‚ â”‚ â”‚
â”‚  â”‚ â”‚                                             â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ ğŸ’¡ å»ºè®®èŒƒå›´ï¼š5-50 äºº                        â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ ğŸ“Š å…è®¸èŒƒå›´ï¼š1-1000 äºº                      â”‚ â”‚ â”‚
â”‚  â”‚ â”‚                                             â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ âš ï¸ æç¤ºï¼š                                   â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ æ–°ä¸Šé™ä¸èƒ½å°äºå½“å‰æˆå‘˜æ•° (8)              â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ ä¿®æ”¹ä¸Šé™ä¸ä¼šç§»é™¤ç°æœ‰æˆå‘˜                  â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ å»ºè®®æ ¹æ®å›¢é˜Ÿè§„æ¨¡åˆç†è®¾ç½®                  â”‚ â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                   â”‚ â”‚
â”‚  â”‚ æƒé™è¯´æ˜                                          â”‚ â”‚
â”‚  â”‚ â„¹ï¸ åªæœ‰é¡¹ç›®æ‰€æœ‰è€…ï¼ˆOwnerï¼‰å¯ä»¥ä¿®æ”¹æˆå‘˜ä¸Šé™         â”‚ â”‚
â”‚  â”‚ âš ï¸ ç®¡ç†å‘˜ï¼ˆAdminï¼‰å’Œå…¶ä»–æˆå‘˜æ— æ­¤æƒé™               â”‚ â”‚
â”‚  â”‚                                                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â”‚  [ä¿å­˜æ›´æ”¹]  [å–æ¶ˆ]                                     â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

--- ä¿å­˜æˆåŠŸ ---

âœ… æˆå‘˜ä¸Šé™å·²æ›´æ–°ä¸º 20 äºº

--- é Owner è®¿é—®æ—¶ ---

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘¥ æˆå‘˜ä¸Šé™è®¾ç½®                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                   â”‚ â”‚
â”‚  â”‚ å½“å‰è®¾ç½®ï¼ˆåªè¯»ï¼‰                                  â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚ â”‚ æˆå‘˜ä¸Šé™       10 äºº                        â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ å½“å‰æˆå‘˜        8 äºº                        â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ å¯ç”¨åé¢        2 ä¸ª                        â”‚ â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                   â”‚ â”‚
â”‚  â”‚ â„¹ï¸ æ‚¨å½“å‰çš„è§’è‰²ï¼šç®¡ç†å‘˜                            â”‚ â”‚
â”‚  â”‚ âš ï¸ åªæœ‰é¡¹ç›®æ‰€æœ‰è€…å¯ä»¥ä¿®æ”¹æˆå‘˜ä¸Šé™                  â”‚ â”‚
â”‚  â”‚                                                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æƒé™æ§åˆ¶

### è§’è‰²æƒé™çŸ©é˜µ

| åŠŸèƒ½ | Owner | Admin | Member | Viewer |
|------|-------|-------|--------|--------|
| ç”Ÿæˆé‚€è¯·é“¾æ¥ | âœ… | âœ… | âŒ | âŒ |
| ç›´æ¥æ·»åŠ æˆå‘˜ | âœ… | âœ… | âŒ | âŒ |
| ä¿®æ”¹æˆå‘˜è§’è‰² | âœ… | âœ… (é™åˆ¶) | âŒ | âŒ |
| ç§»é™¤æˆå‘˜ | âœ… | âœ… (é™åˆ¶) | âŒ | âŒ |
| ä¿®æ”¹æˆå‘˜ä¸Šé™ | âœ… | âŒ | âŒ | âŒ |
| æ’¤é”€é‚€è¯·é“¾æ¥ | âœ… | âœ… | âŒ | âŒ |
| **ä¿®æ”¹é¡¹ç›®è®¾ç½®** | **âœ…** | **âŒ** | **âŒ** | **âŒ** |
| è½¬ç§»é¡¹ç›®æ‰€æœ‰æƒ | âœ… | âŒ | âŒ | âŒ |
| åˆ é™¤é¡¹ç›® | âœ… | âŒ | âŒ | âŒ |

**æƒé™è¯´æ˜ï¼š**

**Ownerï¼ˆé¡¹ç›®æ‰€æœ‰è€…ï¼‰ï¼š**
- æ‹¥æœ‰é¡¹ç›®çš„å®Œå…¨æ§åˆ¶æƒ
- **å”¯ä¸€å¯ä»¥ä¿®æ”¹é¡¹ç›®è®¾ç½®çš„è§’è‰²**ï¼ˆåŒ…æ‹¬æˆå‘˜ä¸Šé™ã€é¡¹ç›®ä¿¡æ¯ç­‰ï¼‰
- å¯ä»¥ç®¡ç†æ‰€æœ‰æˆå‘˜ï¼ˆåŒ…æ‹¬å…¶ä»– Owner å’Œ Adminï¼‰
- å¯ä»¥è½¬ç§»é¡¹ç›®æ‰€æœ‰æƒ
- å¯ä»¥åˆ é™¤é¡¹ç›®

**Adminï¼ˆç®¡ç†å‘˜ï¼‰çš„é™åˆ¶ï¼š**
- åªèƒ½ä¿®æ”¹/ç§»é™¤ Member å’Œ Viewer è§’è‰²çš„æˆå‘˜
- ä¸èƒ½ä¿®æ”¹/ç§»é™¤ Owner å’Œå…¶ä»– Admin
- **ä¸èƒ½ä¿®æ”¹é¡¹ç›®è®¾ç½®**ï¼ˆåŒ…æ‹¬æˆå‘˜ä¸Šé™ã€é¡¹ç›®åç§°ã€æè¿°ç­‰ï¼‰
- ä¸èƒ½è½¬ç§»é¡¹ç›®æ‰€æœ‰æƒ
- ä¸èƒ½åˆ é™¤é¡¹ç›®

---

## æˆå‘˜ä¸Šé™ç®¡ç†

### ä¸Šé™è®¾ç½®

1. **é¡¹ç›®çº§åˆ«ä¸Šé™ï¼ˆä»… Owner å¯ä¿®æ”¹ï¼‰**
   - å­˜å‚¨åœ¨ `projects.member_limit` å­—æ®µ
   - åˆ›å»ºé¡¹ç›®æ—¶é»˜è®¤å€¼ï¼š10 äºº
   - **ä»…é¡¹ç›®æ‰€æœ‰è€…ï¼ˆOwnerï¼‰å¯åœ¨é¡¹ç›®è®¾ç½®ä¸­ä¿®æ”¹**
   - ç®¡ç†å‘˜ï¼ˆAdminï¼‰å’Œå…¶ä»–è§’è‰²æ— æƒä¿®æ”¹
   - å¯é…ç½®èŒƒå›´ï¼š1-1000 äºº
   - ä¿®æ”¹é™åˆ¶ï¼š
     - å¿…é¡»æ˜¯é¡¹ç›® Owner
     - æ–°ä¸Šé™å¿…é¡» >= å½“å‰æˆå‘˜æ•°
     - æ–°ä¸Šé™å¿…é¡» <= 1000ï¼ˆç³»ç»Ÿæœ€å¤§é™åˆ¶ï¼‰
     - æ–°ä¸Šé™å¿…é¡» >= 1ï¼ˆæœ€å°é™åˆ¶ï¼‰

2. **ç³»ç»Ÿçº§åˆ«é™åˆ¶ï¼ˆä¸å¯ä¿®æ”¹ï¼‰**
   - ç¡¬ç¼–ç æœ€å¤§å€¼ï¼š1000 äºº
   - é€šè¿‡æ•°æ®åº“çº¦æŸå¼ºåˆ¶æ‰§è¡Œï¼š`CHECK (member_limit > 0 AND member_limit <= 1000)`
   - æ‰€æœ‰é¡¹ç›®éƒ½ä¸èƒ½è¶…è¿‡æ­¤é™åˆ¶

### ä¸Šé™æ£€æŸ¥æ—¶æœº

1. **ç”Ÿæˆé‚€è¯·é“¾æ¥æ—¶**
   - æ£€æŸ¥å½“å‰æˆå‘˜æ•° < member_limit
   - å¦‚æœå·²è¾¾ä¸Šé™ï¼Œæç¤ºç”¨æˆ·

2. **ç›´æ¥æ·»åŠ æˆå‘˜æ—¶**
   - æ£€æŸ¥ (å½“å‰æˆå‘˜æ•° + è¦æ·»åŠ çš„äººæ•°) <= member_limit
   - æ‰¹é‡æ·»åŠ æ—¶ï¼Œå¦‚æœéƒ¨åˆ†è¶…è¿‡ä¸Šé™ï¼Œåªæ·»åŠ å…è®¸çš„æ•°é‡

3. **é€šè¿‡é‚€è¯·é“¾æ¥åŠ å…¥æ—¶**
   - æ£€æŸ¥å½“å‰æˆå‘˜æ•° < member_limit
   - å¦‚æœå·²æ»¡ï¼Œæ˜¾ç¤ºå‹å¥½æç¤º

### è¶…è¿‡ä¸Šé™çš„å¤„ç†

**å‰ç«¯æç¤ºï¼š**
```
âš ï¸ é¡¹ç›®æˆå‘˜å·²è¾¾ä¸Šé™ (10/10)

æ‚¨å¯ä»¥ï¼š
1. åœ¨é¡¹ç›®è®¾ç½®ä¸­æå‡æˆå‘˜ä¸Šé™
2. ç§»é™¤éƒ¨åˆ†ä¸æ´»è·ƒçš„æˆå‘˜
```

---

## å®ç°æ­¥éª¤

### Phase 1: æ•°æ®åº“å’Œåç«¯åŸºç¡€ï¼ˆç¬¬1-4å¤©ï¼‰

- [x] TODO 1: ä¿®æ”¹ projects è¡¨ï¼Œæ·»åŠ  member_limit å­—æ®µ
- [ ] TODO 2: æ‰©å±• project_members è¡¨ï¼Œæ·»åŠ é‚€è¯·ç›¸å…³å­—æ®µï¼ˆèåˆé‚€è¯·åŠŸèƒ½ï¼‰
- [ ] TODO 3: æ›´æ–° ProjectModel å’Œ ProjectMemberModel
- [ ] TODO 4: å®ç°ç”¨æˆ·æœç´¢ API
- [ ] TODO 5: åœ¨æ·»åŠ æˆå‘˜æ—¶æ£€æŸ¥æˆå‘˜ä¸Šé™
- [ ] TODO 6: å®ç°æ›´æ–°æˆå‘˜ä¸Šé™ API

### Phase 2: é‚€è¯·é“¾æ¥åŠŸèƒ½ï¼ˆç¬¬5-7å¤©ï¼‰

- [ ] TODO 7: å®ç°é‚€è¯·é“¾æ¥ API
  - ç”Ÿæˆé‚€è¯·é“¾æ¥ï¼ˆåœ¨ project_members è¡¨ä¸­åˆ›å»ºé‚€è¯·è®°å½•ï¼‰
  - è·å–é‚€è¯·ä¿¡æ¯ï¼ˆæŸ¥è¯¢é‚€è¯·è®°å½•ï¼‰
  - æ¥å—é‚€è¯·ï¼ˆæ›´æ–°é‚€è¯·è®°å½•ï¼Œåˆ›å»ºæˆå‘˜è®°å½•ï¼‰
  - æ’¤é”€é‚€è¯·ï¼ˆæ›´æ–°é‚€è¯·è®°å½•çŠ¶æ€ä¸º revokedï¼‰

### Phase 3: å‰ç«¯æ•°æ®å±‚ï¼ˆç¬¬8-9å¤©ï¼‰

- [ ] TODO 8: æ›´æ–°å‰ç«¯ Project å’Œ ProjectMember æ¨¡å‹
- [ ] TODO 9: å®ç° ProjectApi æ‰€æœ‰æ–¹æ³•ï¼ˆåŒ…æ‹¬é‚€è¯·ç›¸å…³æ¥å£ï¼‰

### Phase 4: å‰ç«¯ UIï¼ˆç¬¬10-14å¤©ï¼‰

- [ ] TODO 10: åˆ›å»ºé‚€è¯·æˆå‘˜å¯¹è¯æ¡†æ§åˆ¶å™¨
- [ ] TODO 11: åˆ›å»ºé‚€è¯·é“¾æ¥ Tab UIï¼ˆåŒ…å«äºŒç»´ç ï¼‰
- [ ] TODO 12: åˆ›å»ºç›´æ¥æ·»åŠ æˆå‘˜ Tab UI
- [ ] TODO 13: æ›´æ–°æˆå‘˜åˆ—è¡¨é¡µé¢ï¼Œæ˜¾ç¤ºæˆå‘˜æ•°é‡å’Œä¸Šé™
- [ ] TODO 14: å®ç°ç¼–è¾‘/ç§»é™¤æˆå‘˜åŠŸèƒ½
- [ ] **TODO 15: åœ¨é¡¹ç›®è®¾ç½®ä¸­æ·»åŠ æˆå‘˜ä¸Šé™é…ç½®**
  - æ˜¾ç¤ºå½“å‰é…ç½®ï¼ˆä¸Šé™/æˆå‘˜æ•°/å¯ç”¨åé¢ï¼‰
  - ä¿®æ”¹æˆå‘˜ä¸Šé™è¡¨å•ï¼ˆå¸¦å®æ—¶éªŒè¯ï¼‰
  - é›†æˆä¿å­˜åŠŸèƒ½ï¼ˆè°ƒç”¨ updateMemberLimit APIï¼‰
  - **ä¸¥æ ¼çš„æƒé™æ§åˆ¶ï¼š**
    - Ownerï¼šæ˜¾ç¤ºå¯ç¼–è¾‘è¡¨å•ï¼Œå¯ä»¥ä¿®æ”¹
    - Admin/Member/Viewerï¼šæ˜¾ç¤ºåªè¯»ä¿¡æ¯ï¼Œç¦ç”¨ç¼–è¾‘åŠŸèƒ½
    - æ˜¾ç¤ºæƒé™æç¤ºï¼š"åªæœ‰é¡¹ç›®æ‰€æœ‰è€…å¯ä»¥ä¿®æ”¹æˆå‘˜ä¸Šé™"
  - å‹å¥½çš„é”™è¯¯æç¤ºå’ŒæˆåŠŸåé¦ˆ
- [ ] TODO 16: åˆ›å»ºåŠ å…¥é¡¹ç›®é¡µé¢

### Phase 5: æµ‹è¯•å’Œä¼˜åŒ–ï¼ˆç¬¬15å¤©ï¼‰

- [ ] TODO 17: é›†æˆæµ‹è¯•
- [ ] TODO 18: ä¼˜åŒ–å’Œå®Œå–„

---

## ä¾èµ–åŒ…

### å‰ç«¯

```yaml
dependencies:
  qr_flutter: ^4.1.0           # ç”ŸæˆäºŒç»´ç 
  flutter/services: ^0.0.0     # å¤åˆ¶åˆ°å‰ªè´´æ¿
  get: ^4.6.6                  # çŠ¶æ€ç®¡ç†å’Œè·¯ç”±
```

**å¯é€‰ï¼š**
```yaml
  mobile_scanner: ^3.5.5       # æ‰«æäºŒç»´ç 
  share_plus: ^7.2.1           # åˆ†äº«é‚€è¯·é“¾æ¥
```

### åç«¯

- æ— éœ€é¢å¤–ä¾èµ–ï¼Œä½¿ç”¨æ ‡å‡†åº“

---

## å®‰å…¨è€ƒè™‘

1. **é‚€è¯·ç å®‰å…¨**
   - ä½¿ç”¨ UUID v4 ç”Ÿæˆå”¯ä¸€é‚€è¯·ç 
   - é‚€è¯·ç é•¿åº¦è¶³å¤Ÿï¼Œé˜²æ­¢æš´åŠ›ç ´è§£

2. **æƒé™éªŒè¯**
   - æ‰€æœ‰ API éƒ½è¿›è¡Œæƒé™æ£€æŸ¥
   - ä½¿ç”¨ä¸­é—´ä»¶éªŒè¯ JWT token

3. **é€Ÿç‡é™åˆ¶**
   - ç”Ÿæˆé‚€è¯·é“¾æ¥ï¼šæ¯ä¸ªç”¨æˆ·æ¯å°æ—¶æœ€å¤š 10 æ¬¡
   - æ¥å—é‚€è¯·ï¼šæ¯ä¸ª IP æ¯å°æ—¶æœ€å¤š 5 æ¬¡

4. **æ•°æ®éªŒè¯**
   - éªŒè¯æ‰€æœ‰è¾“å…¥å‚æ•°
   - é˜²æ­¢ SQL æ³¨å…¥
   - é˜²æ­¢ XSS æ”»å‡»

---

## ç›‘æ§å’Œæ—¥å¿—

1. **é‚€è¯·é“¾æ¥ä½¿ç”¨æƒ…å†µ**
   - è®°å½•æ¯æ¬¡é‚€è¯·é“¾æ¥çš„ä½¿ç”¨
   - ç»Ÿè®¡é‚€è¯·è½¬åŒ–ç‡

2. **æˆå‘˜å¢é•¿è¶‹åŠ¿**
   - è®°å½•é¡¹ç›®æˆå‘˜æ•°å˜åŒ–
   - åˆ†ææˆå‘˜æ´»è·ƒåº¦

3. **é”™è¯¯æ—¥å¿—**
   - è®°å½•é‚€è¯·å¤±è´¥åŸå› 
   - ç›‘æ§æˆå‘˜ä¸Šé™ç›¸å…³é”™è¯¯

---

## æœªæ¥æ‰©å±•

1. **é‚€è¯·æ‰¹å‡†æµç¨‹**
   - Owner å¯è®¾ç½®é‚€è¯·éœ€è¦æ‰¹å‡†
   - ç”¨æˆ·ç”³è¯·åŠ å…¥åç­‰å¾…æ‰¹å‡†

2. **é‚€è¯·åˆ†æ**
   - æŸ¥çœ‹å“ªäº›é‚€è¯·é“¾æ¥æœ€æœ‰æ•ˆ
   - åˆ†ææˆå‘˜æ¥æº

3. **å›¢é˜Ÿæ¨¡æ¿**
   - é¢„è®¾æˆå‘˜è§’è‰²å’Œæƒé™æ¨¡æ¿
   - å¿«é€Ÿæ‰¹é‡é‚€è¯·

4. **é‚®ä»¶é‚€è¯·**
   - é€šè¿‡é‚®ç®±ç›´æ¥å‘é€é‚€è¯·
   - è‡ªåŠ¨å‘é€æ¬¢è¿é‚®ä»¶

---

## é™„å½•

### A. æ•°æ®åº“ ER å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   users     â”‚         â”‚  project_members      â”‚         â”‚  projects   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”¤ user_id (FK,nullable) â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ id (PK)     â”‚
â”‚ username    â”‚         â”‚ project_id (FK)       â”‚         â”‚ name        â”‚
â”‚ email       â”‚         â”‚ invited_by (FK)       â”‚         â”‚ member_limitâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ role                  â”‚         â”‚ ...         â”‚
       â–²                â”‚ invite_code (unique)  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                â”‚ expires_at            â”‚
       â”‚                â”‚ max_uses              â”‚
       â”‚                â”‚ used_count            â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ status                â”‚
        (invited_by)    â”‚ joined_at             â”‚
                        â”‚ ...                   â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â”‚
                                â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚ project_member_invite_logs   â”‚
                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                   â”‚ id (PK)                      â”‚
                   â”‚ member_id (FK)               â”‚
                   â”‚ user_id (FK)                 â”‚
                   â”‚ accepted                     â”‚
                   â”‚ accepted_at                  â”‚
                   â”‚ ip_address                   â”‚
                   â”‚ user_agent                   â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

è¯´æ˜ï¼š
- project_members è¡¨åŒæ—¶å­˜å‚¨ä¸¤ç§è®°å½•ï¼š
  1. æˆå‘˜è®°å½•ï¼šuser_id æœ‰å€¼ï¼Œinvite_code ä¸º NULL
  2. é‚€è¯·é“¾æ¥è®°å½•ï¼šuser_id ä¸º NULLï¼Œinvite_code æœ‰å€¼
- é€šè¿‡ CHECK çº¦æŸç¡®ä¿æ¯æ¡è®°å½•åªèƒ½æ˜¯å…¶ä¸­ä¸€ç§ç±»å‹
```

---

**æ–‡æ¡£ç‰ˆæœ¬ï¼š** v1.0  
**æœ€åæ›´æ–°ï¼š** 2025-10-28  
**ä½œè€…ï¼š** TTPolyglot Team

